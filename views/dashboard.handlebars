<!-- views/dashboard.handlebars -->
<h1>Welcome to Your Dashboard, {{user.username}}!</h1>

{{#if user.Posts.length}}
  <h2>Your Blog Posts:</h2>
  <ul>
    {{#each user.Posts}}
      <li>
        <a href="/post/{{id}}">{{title}}</a>
        <p>{{content}}</p>
      </li>
    {{/each}}
  </ul>
{{else}}
  <p>You haven't created any blog posts yet. <span id="create-post-text">Create one now!</span></p>
{{/if}}

<!-- Button to toggle the visibility of the form -->
<button id="add-post-btn">Add a New Blog Post</button>

<!-- Form for creating a new post (initially hidden) -->
<form id="create-post-form" action="/api/posts" method="post" style="display: none;"> 
  <label for="post-title">Post Title:</label>
  <input type="text" id="post-title" name="title" required aria-label="Post Title">

  <label for="post-content">Post Content:</label>
  <textarea id="post-content" name="content" rows="4" cols="50" required aria-label="Post Content"></textarea>

  <button type="submit" id="submit-post-btn">Create Post</button>
</form>

<!-- JavaScript to toggle form visibility and handle form submission -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const addPostBtn = document.getElementById('add-post-btn');
    const createPostForm = document.getElementById('create-post-form');
    const submitPostBtn = document.getElementById('submit-post-btn');

    addPostBtn.addEventListener('click', function () {
      createPostForm.style.display = 'block';
    });

    submitPostBtn.addEventListener('click', function (event) {
      // Handle form submission logic here (e.g., send data to the server)
      // After successful submission, you can redirect the user to the updated dashboard
      document.location.replace('/updated-dashboard');
    });
  });
</script>
